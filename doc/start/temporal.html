
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Temporal graph Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/greycat.css">
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="manyworld.html" />
    
    
    <link rel="prev" href="minimal.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="./">
            
                <a href="./">
            
                    
                    Quick start
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="minimal.html">
            
                <a href="minimal.html">
            
                    
                    First minimal graph
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.2" data-path="temporal.html">
            
                <a href="temporal.html">
            
                    
                    Temporal graph
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="manyworld.html">
            
                <a href="manyworld.html">
            
                    
                    Many-World graph
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="indexing.html">
            
                <a href="indexing.html">
            
                    
                    Indexing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="persistence.html">
            
                <a href="persistence.html">
            
                    
                    Persistence
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="distributed.html">
            
                <a href="distributed.html">
            
                    
                    Distributed graph
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../tasks/">
            
                <a href="../tasks/">
            
                    
                    Tasks
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../tasks/Context.html">
            
                <a href="../tasks/Context.html">
            
                    
                    Context and variables
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../tasks/actions/">
            
                <a href="../tasks/actions/">
            
                    
                    Actions
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../tasks/actions/add.html">
            
                <a href="../tasks/actions/add.html">
            
                    
                    add
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../tasks/actions/addTo.html">
            
                <a href="../tasks/actions/addTo.html">
            
                    
                    addTo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="../tasks/actions/asVar.html">
            
                <a href="../tasks/actions/asVar.html">
            
                    
                    asVar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.4" data-path="../tasks/actions/asGlobalVar.html">
            
                <a href="../tasks/actions/asGlobalVar.html">
            
                    
                    asGlobalVar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.5" data-path="../tasks/actions/get.html">
            
                <a href="../tasks/actions/get.html">
            
                    
                    get
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.6" data-path="../tasks/actions/loop.html">
            
                <a href="../tasks/actions/loop.html">
            
                    
                    loop
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.7" data-path="../tasks/actions/loopPar.html">
            
                <a href="../tasks/actions/loopPar.html">
            
                    
                    loopPar
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.8" data-path="../tasks/actions/setProperty.html">
            
                <a href="../tasks/actions/setProperty.html">
            
                    
                    setProperty
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.9" data-path="../tasks/actions/traverse.html">
            
                <a href="../tasks/actions/traverse.html">
            
                    
                    traverse
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../tasks/Execute.html">
            
                <a href="../tasks/Execute.html">
            
                    
                    Execution methods
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../tasks/Hook.html">
            
                <a href="../tasks/Hook.html">
            
                    
                    Hooks and Debug
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../scheduler.html">
            
                <a href="../scheduler.html">
            
                    
                    Scheduler
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../ml/">
            
                <a href="../ml/">
            
                    
                    Machine learning
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../ml/polynomial.html">
            
                <a href="../ml/polynomial.html">
            
                    
                    Polynomial compression
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../js/">
            
                <a href="../js/">
            
                    
                    JavaScript
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../js/browser.html">
            
                <a href="../js/browser.html">
            
                    
                    Browser
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../modeling/">
            
                <a href="../modeling/">
            
                    
                    GreyCat Modeling
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../modeling/getting_started.html">
            
                <a href="../modeling/getting_started.html">
            
                    
                    Getting started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../modeling/indexes.html">
            
                <a href="../modeling/indexes.html">
            
                    
                    Indexes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../modeling/constants.html">
            
                <a href="../modeling/constants.html">
            
                    
                    Constants
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../modeling/annotations.html">
            
                <a href="../modeling/annotations.html">
            
                    
                    Annotations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../modeling/defaults.html">
            
                <a href="../modeling/defaults.html">
            
                    
                    Default values
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="../modeling/derived_attributes.html">
            
                <a href="../modeling/derived_attributes.html">
            
                    
                    Derived attributes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="../modeling/custom_types.html">
            
                <a href="../modeling/custom_types.html">
            
                    
                    Custom types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.8" data-path="../modeling/grammar.html">
            
                <a href="../modeling/grammar.html">
            
                    
                    Grammar
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../plugin/">
            
                <a href="../plugin/">
            
                    
                    Extending GreyCat
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Temporal graph</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="temporal-graphs">Temporal graphs</h1>
<p><a href="https://github.com/datathings/greycat-samples/blob/master/src/main/java/greycat/samples/Temporal.java" target="_blank">Code sample here</a></p>
<p>Many domains, from social networks to cyber-physical systems to enterprise applications, need to deal with dynamic, i.e., time-evolving data. Think of a time-evolving graph like the following figure:</p>
<p><img src="temporal_graph.png" alt="temporal graph"></p>
<p>The orange nodes in the graph represent the changes compared to the version before. Over time, both attributes of the nodes, i.e., values, as well as the structure of the graph itself can change arbitrary. Usually, considering only the latest state of the graph is not enough, instead, many applications require to analyse and correlate past data, or need to navigate through the history to analyse trends. That is where the temporal graphs are required.</p>
<p>First, let&apos;s create again a graph, just like for the non-temporal <a href="minimal.html">previous example</a></p>
<pre><code class="lang-java"><span class="hljs-comment">//Create a minimal graph with the default configuration</span>
Graph g = <span class="hljs-keyword">new</span> GraphBuilder().build();
<span class="hljs-comment">//Connect the graph</span>
g.connect(isConnected -&gt; {
        <span class="hljs-comment">//Display that the graph database is connected!</span>
        System.out.println(<span class="hljs-string">&quot;Connected : &quot;</span> + isConnected);
        <span class="hljs-comment">//your next code goes here...</span>
});
</code></pre>
<p>Then, we specify a time point and create nodes, attributes, and relations at this time 0.</p>
<pre><code class="lang-java"><span class="hljs-keyword">long</span> timepoint_0 = <span class="hljs-number">0</span>;  <span class="hljs-comment">//the timestamp is a long and represents the time concept</span>

Node sensor0 = g.newNode(<span class="hljs-number">0</span>, timepoint_0); <span class="hljs-comment">//the second param is the time</span>
sensor0.set(<span class="hljs-string">&quot;id&quot;</span>, Type.STRING, <span class="hljs-string">&quot;4494F&quot;</span>);
sensor0.set(<span class="hljs-string">&quot;name&quot;</span>, Type.STRING, <span class="hljs-string">&quot;sensor0&quot;</span>);
sensor0.set(<span class="hljs-string">&quot;value&quot;</span>, Type.DOUBLE, <span class="hljs-number">0.5</span>); <span class="hljs-comment">//set the value of the sensor</span>
</code></pre>
<p>Nodes can freely &apos;travel in time&apos;. This operation will create a temporal view of the node at the requested time.
Each travel in time operation is asynchronous and returns in the callback a new node (here called sensor0T1) which is the new version of the node sensor0 but as resolved for the requested time T1.</p>
<pre><code class="lang-java"><span class="hljs-keyword">long</span> timepoint_1 = <span class="hljs-number">100</span>;
sensor0.travelInTime(timepoint_1, (Node sensor0T1) -&gt; {
        sensor0T1.set(<span class="hljs-string">&quot;value&quot;</span>, Type.DOUBLE, <span class="hljs-number">21.3</span>); <span class="hljs-comment">//update the value of the time now</span>
        <span class="hljs-comment">//Display the value at time 0</span>
        System.out.println(<span class="hljs-string">&quot;T0:&quot;</span> + sensor0.toString()); <span class="hljs-comment">//print T0:{&quot;world&quot;:0,&quot;time&quot;:0,&quot;id&quot;:1,&quot;id&quot;:&quot;4494F&quot;,&quot;name&quot;:&quot;sensor0&quot;,&quot;value&quot;:0.5}</span>
        <span class="hljs-comment">//Display the value at time now</span>
        System.out.println(<span class="hljs-string">&quot;T1:&quot;</span> + sensor0T1.toString()); <span class="hljs-comment">//print T1:{&quot;world&quot;:0,&quot;time&quot;:100,&quot;id&quot;:1,&quot;id&quot;:&quot;4494F&quot;,&quot;name&quot;:&quot;sensor0&quot;,&quot;value&quot;:21.3}</span>

        <span class="hljs-comment">//your next code goes here...</span>
});
</code></pre>
<p>Here we can see, that the same sensor 0, resolve a value of 0.5 at time 0 and a different value of 21.3 at time T1=100.</p>
<p>The method <em>travelInTime</em> can be used to resolve any node at an arbitrary time point. The default behavior of this function is to resolve efficiently the latest known version of the requested node up till the requested time.
Notice that we didn&apos;t need to set the attributes ID and names again at time T1. Since we didn&apos;t modify them, the resolver keep the last known values as set at tune T0.
As an example, if we go to time T2=50 with (T0&lt;T2&lt;T1), without modifying the values, the resolver will display the information as it was at the last known time before T2 (which is T0)</p>
<pre><code class="lang-java"><span class="hljs-keyword">long</span> timepoint_2= <span class="hljs-number">50</span>;
                 sensor0.travelInTime(timepoint_2, (Node sensor0T2) -&gt;{
                         System.out.println(<span class="hljs-string">&quot;T2:&quot;</span> + sensor0T2.toString()); <span class="hljs-comment">//prints T2:{&quot;world&quot;:0,&quot;time&quot;:50,&quot;id&quot;:1,&quot;id&quot;:&quot;4494F&quot;,&quot;name&quot;:&quot;sensor0&quot;,&quot;value&quot;:0.5}</span>
                 });
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="minimal.html" class="navigation navigation-prev " aria-label="Previous page: First minimal graph">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="manyworld.html" class="navigation navigation-next " aria-label="Next page: Many-World graph">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Temporal graph","level":"1.2.2","depth":2,"next":{"title":"Many-World graph","level":"1.2.3","depth":2,"path":"start/manyworld.md","ref":"start/manyworld.md","articles":[]},"previous":{"title":"First minimal graph","level":"1.2.1","depth":2,"path":"start/minimal.md","ref":"start/minimal.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/greycat.css"}},"file":{"path":"start/temporal.md","mtime":"2017-05-08T13:01:15.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-09-20T08:57:15.824Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

